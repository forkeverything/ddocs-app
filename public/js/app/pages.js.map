{"version":3,"sources":["checklist/make.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pages.js","sourcesContent":["Vue.component('checklist-make', {\n    name: 'checklistMake',\n    el: function() {\n        return '#checklist-make'\n    },\n    data: function() {\n        return {\n            ajaxReady: true,\n            checklistRecipient: '',\n            checklistName: '',\n            checklistDescription: '',\n            editingName: false,\n            files: [\n                {\n                    name: '',\n                    description: '',\n                    due: '',\n                    required: 1\n                }\n            ]\n        };\n    },\n    props: [],\n    computed: {\n        checklistNameText: function() {\n            // Used to display a default when a name isn't given\n            if(this.checklistName) return this.checklistName;\n            return 'List Name';\n        },\n        validFiles: function() {\n            // Only return files with names\n            return _.filter(this.files, function (file) {\n                return file.name;\n            });\n        },\n        fileCount: function() {\n           return this.validFiles.length;\n        },\n        canSendChecklist: function() {\n            // Required fields...\n            return this.checklistRecipient && this.checklistName && this.fileCount > 0;\n        }\n    },\n    methods: {\n        toggleEditingName: function() {\n            this.editingName = ! this.editingName;\n            if(this.editingName) {\n                this.$nextTick(function() {\n                    $('#input-checklist-name').focus();\n                });\n            }\n        },\n        addAnotherFileAfter: function(file) {\n            var fileIndex = _.indexOf(this.files, file);\n            var newFile = {\n                name: '',\n                description: '',\n                due: '',\n                required: 1\n            };\n            this.files.splice(fileIndex + 1, 0, newFile);\n            this.$nextTick(function () {\n                $($('.single-file')[fileIndex + 1]).find('.input-file-name').focus();\n            });\n        },\n        removeFile: function(file) {\n            var fileIndex = _.indexOf(this.files, file);\n            if(! file.name && fileIndex !== 0) {\n                this.files.splice(fileIndex, 1);\n                this.$nextTick(function () {\n                    $($('.single-file')[fileIndex - 1]).find('.input-file-name').focus();\n                });\n            }\n        },\n        goTo: function(direction, file) {\n            var fileIndex = _.indexOf(this.files, file);\n            if(direction === 'prev') {\n                $($('.single-file')[fileIndex - 1]).find('.input-file-name').focus();\n            } else {\n                $($('.single-file')[fileIndex + 1]).find('.input-file-name').focus();\n            }\n        },\n        toggleRequired: function(file) {\n            file.required = file.required ? 0 : 1;\n        },\n        sendChecklist: function() {\n            var self = this;\n            if(!self.ajaxReady) return;\n            self.ajaxReady = false;\n            $.ajax({\n                url: '/checklist/make',\n                method: 'POST',\n                data: {\n                    recipient: self.checklistRecipient,\n                    name: self.checklistName,\n                    description: self.checklistDescription,\n                    requested_files: self.validFiles\n                },\n                success: function(data) {\n                   location.href = \"/checklist/\" + data;\n                },\n                error: function(response) {\n                    console.log(response);\n                    self.ajaxReady = true;\n                }\n            });\n        }\n    },\n    events: {\n\n    },\n    ready: function() {\n        $(document).on('focus', '.input-file-name', function(){\n            $(this).parent().addClass('is-focused');\n        });\n\n        $(document).on('blur', '.input-file-name', function(){\n            $(this).parent().removeClass('is-focused');\n        });\n    }\n});"],"sourceRoot":"/source/"}